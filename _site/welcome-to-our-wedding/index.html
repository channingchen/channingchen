<meta name="viewport" content="width=device-width, initial-scale=1" />

<link rel="stylesheet" type="text/css" href="../media/css/mystyle.css" />

<link rel="stylesheet" type="text/css" href="../media/css/colorbox.css" />

<script type="text/javascript" src="../media/js/jquery-1.9.1.min.js"></script>

<script type="text/javascript" src="../media/js/jquery.colorbox-min.js"></script>

<script type="text/javascript">  
function getQueryString(name) { 
	var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i"); 
	var r = window.location.search.substr(1).match(reg); 
	if (r != null) return unescape(r[2]); return null; 
} 

function loadScript() {  
  var script = document.createElement("script");  
  script.src = "https://api.map.baidu.com/api?v=2.0&ak=8ad571f52ec70fc5939ba9c9bdb01408&callback=initialize";//此为v2.0版本的引用方式  
  document.body.appendChild(script);  
}

window.onload = loadScript;

function loadMap(){
	var map = new BMap.Map('cboxLoadedContent');  
	var homePoint = new BMap.Point(119.176348,34.605934);
	map.centerAndZoom(homePoint, 25);               
	map.enableScrollWheelZoom(); 

	var top_left_control = new BMap.ScaleControl({anchor: BMAP_ANCHOR_BOTTOM_LEFT});// 左上角，添加比例尺
	var top_left_navigation = new BMap.NavigationControl();  //左上角，添加默认缩放平移控件  
	map.addControl(top_left_control);        
	map.addControl(top_left_navigation);  

	var geolocationControl = new BMap.GeolocationControl();
	geolocationControl.addEventListener("locationSuccess", function(e){
		var points = new Array();
		points[0] = e.point;
		points[1] = homePoint;
		var view = map.getViewport(points);
		map.centerAndZoom(view.center, view.zoom);
	});
	geolocationControl.addEventListener("locationError",function(e){
		alert('定位失败');
	});
	map.addControl(geolocationControl);

	var stCtrl = new BMap.PanoramaControl(); //构造全景控件
	stCtrl.setOffset(new BMap.Size(20, 20));
	map.addControl(stCtrl);//添加全景控件

	var marker = new BMap.Marker(homePoint);  // 创建标注
	map.addOverlay(marker); 

}

$(document).ready(function(){
	$("#helloguest").text(getQueryString("helloguest"));
	var version = getQueryString("v");
	if (version=='1'){
		$("#commonText1").text("成光、徐宁玲之子成明的婚礼，将于：");
	}

	$(".pic").colorbox({rel:'pic', slideshow:true, width:"90%", height:"90%"});
	$("#address").colorbox({
		rel:'address', width:"90%", height:"90%",
		onComplete: loadMap
	});
});
</script>

<div id="main-content">
	<div id="all">
		<div id="name">
			<span>成明</span>
			<img id="flower" src="../image/flower.png" /><img />
			<span>李亚会</span>
		</div>
		<div id="allpic">
		<div id="play-div">
			<img id="play" class="pic" src="../image/play.png" href="../image/1.jpg" />
		</div>
		<img id="pic" src="../image/1.jpg" href="../image/1.jpg" />
		</div>
		<img class="pic hide" href="../image/2.jpg" />
		<img class="pic hide" href="../image/3.jpg" />
		<img class="pic hide" href="../image/4.jpg" />
		<img class="pic hide" href="../image/5.jpg" />
		<img class="pic hide" href="../image/6.jpg" />
		<img class="pic hide" href="../image/7.jpg" />
		<img class="pic hide" href="../image/8.jpg" />
		<div class="textdiv">
		<div id="commonText1">我们的婚礼将在：</div>
			<div id="time">二零一七年·六月四日</div>
			<div id="city">江苏·连云港</div>
			<div id="address" class="address" href="javascript:void(0);">
				<img id="marker" src="../image/marker.png" /><img />
				<span>开元曼居酒店</span>
			</div>
			<div id="commonText2">举行，期待您的光临！</div>
		</div>
	</div>
</div>
